<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pix Assistindo Manager</title>
    <link rel="stylesheet" href="pix-style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#10b981">
    <meta name="description" content="Gerenciador de saldo e miss√µes para o sistema Pix Assistindo">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%2310b981'/%3E%3Ctext x='50' y='60' text-anchor='middle' fill='white' font-size='40' font-family='Arial'%3EP%3C/text%3E%3C/svg%3E">
</head>
<body>

<!-- ========================================
     VERIFICA√á√ÉO DE TELEGRAM WEBAPP
     ======================================== -->
<div id="telegramBlockOverlay" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0a0e1a 0%, #1a1f35 50%, #0d1225 100%);
    z-index: 99999;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: 'Rajdhani', sans-serif;
">
    <div style="text-align: center; padding: 2rem;">
        <div style="font-size: 80px; margin-bottom: 20px;">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#0088cc"/>
            </svg>
        </div>
        <h1 style="color: #ffffff; font-size: 28px; margin-bottom: 15px; font-weight: 700;">Acesso Restrito</h1>
        <p style="color: #a0aec0; font-size: 16px; margin-bottom: 30px; line-height: 1.6;">
            Este site s√≥ pode ser acessado<br>pelo aplicativo do <span style="color: #0088cc; font-weight: 600;">Telegram</span>
        </p>
        <a href="https://t.me/" style="
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #0088cc 0%, #0077b5 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 12px;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(0, 136, 204, 0.5)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(0, 136, 204, 0.4)';">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.02-1.96 1.25-5.54 3.67-.52.36-1 .53-1.42.52-.47-.01-1.37-.26-2.03-.48-.82-.27-1.47-.42-1.42-.88.03-.24.37-.49 1.02-.74 3.98-1.73 6.64-2.87 7.97-3.43 3.79-1.58 4.58-1.86 5.09-1.87.11 0 .37.03.54.17.14.12.18.28.2.45-.01.06.01.24 0 .38z"/>
            </svg>
            Abrir Telegram
        </a>
    </div>
</div>

<script>
(function() {
    'use strict';
    
    // Verifica√ß√£o RIGOROSA se est√° no Telegram WebApp
    // S√ì aceita se o User-Agent contiver o package name do Telegram
    function isTelegramWebApp() {
        var ua = navigator.userAgent || '';
        
        // VERIFICA√á√ÉO PRINCIPAL: package name do Telegram no User-Agent
        // Quando aberto dentro do Telegram, o User-Agent cont√©m "org.telegram.messenger"
        if (ua.indexOf('org.telegram.messenger') !== -1) {
            return true;
        }
        
        // Verifica tamb√©m por outros clientes Telegram
        if (ua.indexOf('org.telegram.plus') !== -1) {
            return true;
        }
        if (ua.indexOf('org.thunderdog.challegram') !== -1) {
            return true;
        }
        if (ua.indexOf('Telegram') !== -1 && ua.indexOf('Android') !== -1) {
            return true;
        }
        if (ua.indexOf('Telegram') !== -1 && ua.indexOf('iPhone') !== -1) {
            return true;
        }
        if (ua.indexOf('Telegram') !== -1 && ua.indexOf('iPad') !== -1) {
            return true;
        }
        
        // N√ÉO aceita SDK simulado - apenas User-Agent real
        return false;
    }
    
    // Verifica imediatamente (sem esperar SDK)
    if (!isTelegramWebApp()) {
        // N√£o est√° no Telegram - bloqueia acesso
        var overlay = document.getElementById('telegramBlockOverlay');
        if (overlay) {
            overlay.style.display = 'flex';
        }
        // Esconde todo o conte√∫do principal
        document.addEventListener('DOMContentLoaded', function() {
            var mainContent = document.querySelector('.container');
            if (mainContent) mainContent.style.display = 'none';
        });
    }
})();
</script>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üí∞</div>
                    <h1>Pix Assistindo Manager</h1>
                </div>
                <div class="status-indicator">
                    <div id="statusDot" class="status-dot stopped"></div>
                    <span id="statusText" class="status-text">Parado</span>
                </div>
                <div class="timer-display" style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 12px; margin-left: 16px;">
                    <span style="font-size: 14px; opacity: 0.8;">Tempo de Uso:</span>
                    <span id="sessionTimer" style="font-size: 18px; font-weight: bold; margin-left: 8px;">00:00:00</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Panel -->
            <section class="config-panel">
                <h2>Configura√ß√£o</h2>
                <div class="form-group">
                    <label for="email">E-mail do Usu√°rio:</label>
                    <input type="email" id="email" placeholder="Ex: usuario@email.com" required>
                </div>
                <div class="form-group">
                    <label for="tipoAnuncio">Tipo de An√∫ncio:</label>
                    <select id="tipoAnuncio" class="select-input">
                        <option value="rewarded">An√∫ncio Recompensado</option>
                        <option value="interstitial">An√∫ncio Intersticial</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="interval">Intervalo (segundos):</label>
                    <div class="slider-container">
                        <input type="range" id="interval" min="60" max="300" value="60" step="10">
                        <span id="intervalValue" class="slider-value">60</span>
                    </div>
                </div>
                <div class="control-buttons">
                    <button id="startBtn" class="btn btn-primary">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        Iniciar Simula√ß√£o
                    </button>
                    <button id="stopBtn" class="btn btn-secondary" disabled>
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Parar
                    </button>
                    <button id="clearBtn" class="btn btn-outline">
                        <span class="btn-icon">üóëÔ∏è</span>
                        Limpar Log
                    </button>

                </div>
            </section>

            <!-- Stats Panel -->
            <section class="stats-panel">
                <h2>Estat√≠sticas</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <div class="stat-value" id="requestCount">0</div>
                            <div class="stat-label">An√∫ncios Assistidos</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="successCount">0</div>
                            <div class="stat-label">Sucessos</div>
                        </div>
                    </div>
                    <div class="stat-card error">
                        <div class="stat-icon">‚ùå</div>
                        <div class="stat-content">
                            <div class="stat-value" id="errorCount">0</div>
                            <div class="stat-label">Erros</div>
                        </div>
                    </div>
                    <div class="stat-card money">
                        <div class="stat-icon">üíµ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalEarnings">R$ 0,00</div>
                            <div class="stat-label">Total Ganho</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- User Info Panel -->
            <section class="user-info-panel">
                <h2>Informa√ß√µes do Usu√°rio</h2>
                <div id="userInfoContainer" class="user-info-container">
                    <div class="user-info-empty">
                        <span class="empty-icon">üë§</span>
                        <p>Execute uma consulta para ver as informa√ß√µes do usu√°rio</p>
                    </div>
                </div>
            </section>

            <!-- Mission Progress Panel -->
            <section class="mission-panel">
                <h2>Progresso da Miss√£o</h2>
                <div id="missionContainer" class="mission-container">
                    <div class="mission-empty">
                        <span class="empty-icon">üéØ</span>
                        <p>Dados da miss√£o aparecer√£o aqui ap√≥s a primeira consulta</p>
                    </div>
                </div>
            </section>

            <!-- Rewards Config Panel -->
            <section class="rewards-panel">
                <h2>Configura√ß√µes de Recompensa</h2>
                <div id="rewardsContainer" class="rewards-container">
                    <div class="rewards-empty">
                        <span class="empty-icon">‚öôÔ∏è</span>
                        <p>Carregando configura√ß√µes de recompensa...</p>
                    </div>
                </div>
            </section>

            <!-- Log Panel -->
            <section class="log-panel">
                <div class="log-header">
                    <h2>Log de Atividades</h2>
                    <button id="autoScrollBtn" class="btn btn-small active">Auto Scroll</button>
                </div>
                <div id="logContainer" class="log-container">
                    <div class="log-empty">
                        <span class="log-empty-icon">üìù</span>
                        <p>Clique em "Iniciar Simula√ß√£o" para come√ßar a assistir an√∫ncios</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="session-security.js"></script>
    <script src="pix-script.js"></script>
</body>
</html>

