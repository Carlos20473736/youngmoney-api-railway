<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pix Assistindo Manager</title>

    <!-- VERIFICA√á√ÉO TELEGRAM WEBAPP - S√ì FUNCIONA DENTRO DO TELEGRAM -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
    (function(){
        function bloquearAcesso() {
            document.documentElement.innerHTML = '<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Acesso Restrito</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,system-ui,sans-serif;background:#0a0e1a;color:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center}.container{text-align:center;padding:40px 20px;max-width:400px}.icon{width:100px;height:100px;margin:0 auto 30px;background:linear-gradient(135deg,#8b5cf6,#6366f1);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 40px rgba(139,92,246,0.4)}.icon svg{width:50px;height:50px;fill:#fff}h1{font-size:1.8rem;color:#8b5cf6;margin-bottom:15px;font-weight:700}p{color:#a0aec0;font-size:1rem;line-height:1.6;margin-bottom:10px}.telegram-link{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,#0088cc,#00a8e8);color:#fff;padding:15px 30px;border-radius:12px;text-decoration:none;font-weight:600;margin-top:25px;transition:transform 0.2s,box-shadow 0.2s}.telegram-link:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,136,204,0.4)}.telegram-link svg{width:24px;height:24px;fill:#fff}</style></head><body><div class="container"><div class="icon"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg></div><h1>Acesso Restrito</h1><p>Este site s√≥ pode ser acessado atrav√©s do aplicativo do <strong>Telegram</strong>.</p><p style="color:#00ddff;font-size:0.9rem;">Abra o link dentro do Telegram para continuar.</p><a href="https://t.me" class="telegram-link" target="_blank"><svg viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>Abrir Telegram</a></div></body></html>';
        }
        var tg = window.Telegram && window.Telegram.WebApp;
        var hasValidInitData = tg && tg.initData && tg.initData.length > 0;
        var hasInitDataUnsafe = tg && tg.initDataUnsafe && tg.initDataUnsafe.user;
        if (!hasValidInitData && !hasInitDataUnsafe) {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', bloquearAcesso);
            } else {
                bloquearAcesso();
            }
            throw new Error('Acesso bloqueado: N√£o est√° no Telegram WebApp');
        }
        if (tg) { tg.ready(); tg.expand(); }
    })();
    </script>

    <link rel="stylesheet" href="pix-style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#10b981">
    <meta name="description" content="Gerenciador de saldo e miss√µes para o sistema Pix Assistindo">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%2310b981'/%3E%3Ctext x='50' y='60' text-anchor='middle' fill='white' font-size='40' font-family='Arial'%3EP%3C/text%3E%3C/svg%3E">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üí∞</div>
                    <h1>Pix Assistindo Manager</h1>
                </div>
                <div class="status-indicator">
                    <div id="statusDot" class="status-dot stopped"></div>
                    <span id="statusText" class="status-text">Parado</span>
                </div>
                <div class="timer-display" style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 12px; margin-left: 16px;">
                    <span style="font-size: 14px; opacity: 0.8;">Tempo de Uso:</span>
                    <span id="sessionTimer" style="font-size: 18px; font-weight: bold; margin-left: 8px;">00:00:00</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Panel -->
            <section class="config-panel">
                <h2>Configura√ß√£o</h2>
                <div class="form-group">
                    <label for="email">E-mail do Usu√°rio:</label>
                    <input type="email" id="email" placeholder="Ex: usuario@email.com" required>
                </div>
                <div class="form-group">
                    <label for="tipoAnuncio">Tipo de An√∫ncio:</label>
                    <select id="tipoAnuncio" class="select-input">
                        <option value="rewarded">An√∫ncio Recompensado</option>
                        <option value="interstitial">An√∫ncio Intersticial</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="interval">Intervalo (segundos):</label>
                    <div class="slider-container">
                        <input type="range" id="interval" min="60" max="300" value="60" step="10">
                        <span id="intervalValue" class="slider-value">60</span>
                    </div>
                </div>
                <div class="control-buttons">
                    <button id="startBtn" class="btn btn-primary">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        Iniciar Simula√ß√£o
                    </button>
                    <button id="stopBtn" class="btn btn-secondary" disabled>
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Parar
                    </button>
                    <button id="clearBtn" class="btn btn-outline">
                        <span class="btn-icon">üóëÔ∏è</span>
                        Limpar Log
                    </button>

                </div>
            </section>

            <!-- Stats Panel -->
            <section class="stats-panel">
                <h2>Estat√≠sticas</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <div class="stat-value" id="requestCount">0</div>
                            <div class="stat-label">An√∫ncios Assistidos</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="successCount">0</div>
                            <div class="stat-label">Sucessos</div>
                        </div>
                    </div>
                    <div class="stat-card error">
                        <div class="stat-icon">‚ùå</div>
                        <div class="stat-content">
                            <div class="stat-value" id="errorCount">0</div>
                            <div class="stat-label">Erros</div>
                        </div>
                    </div>
                    <div class="stat-card money">
                        <div class="stat-icon">üíµ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalEarnings">R$ 0,00</div>
                            <div class="stat-label">Total Ganho</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- User Info Panel -->
            <section class="user-info-panel">
                <h2>Informa√ß√µes do Usu√°rio</h2>
                <div id="userInfoContainer" class="user-info-container">
                    <div class="user-info-empty">
                        <span class="empty-icon">üë§</span>
                        <p>Execute uma consulta para ver as informa√ß√µes do usu√°rio</p>
                    </div>
                </div>
            </section>

            <!-- Mission Progress Panel -->
            <section class="mission-panel">
                <h2>Progresso da Miss√£o</h2>
                <div id="missionContainer" class="mission-container">
                    <div class="mission-empty">
                        <span class="empty-icon">üéØ</span>
                        <p>Dados da miss√£o aparecer√£o aqui ap√≥s a primeira consulta</p>
                    </div>
                </div>
            </section>

            <!-- Rewards Config Panel -->
            <section class="rewards-panel">
                <h2>Configura√ß√µes de Recompensa</h2>
                <div id="rewardsContainer" class="rewards-container">
                    <div class="rewards-empty">
                        <span class="empty-icon">‚öôÔ∏è</span>
                        <p>Carregando configura√ß√µes de recompensa...</p>
                    </div>
                </div>
            </section>

            <!-- Log Panel -->
            <section class="log-panel">
                <div class="log-header">
                    <h2>Log de Atividades</h2>
                    <button id="autoScrollBtn" class="btn btn-small active">Auto Scroll</button>
                </div>
                <div id="logContainer" class="log-container">
                    <div class="log-empty">
                        <span class="log-empty-icon">üìù</span>
                        <p>Clique em "Iniciar Simula√ß√£o" para come√ßar a assistir an√∫ncios</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="session-security.js"></script>
    <script src="pix-script.js"></script>
</body>
</html>

